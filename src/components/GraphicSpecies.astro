---
import PlotFigure from "./PlotFigure.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/penguins.json";

const { species } = Astro.props;
const penguinsFiltered = penguins.filter(({species: s}) => s === species);

// Configuration du graphique pour l'espèce donnée
const plotOptions = {
  title: `Graphique des penguins ${species}`,
  marks: [
    Plot.dot(penguinsFiltered, {
      x: "culmen_length_mm",
      y: "culmen_depth_mm",
      fill: "sex",
      stroke: "island",
      strokeWidth: 2,
      r: 6,
    }),
  ],
  x: {
    label: "Longueur du culmen (mm)",
    grid: true,
  },
  y: {
    label: "Profondeur du culmen (mm)",
    grid: true,
  },
  color: {
    legend: true,
  },
  width: 800,
  height: 500,
};
---

<div class="graphic-container">
  <h2 class="text-3xl font-bold mb-4 text-center">Espèce: {species}</h2>
  <div class="mb-4 text-center">
    <p class="text-lg">Nombre d'individus: {penguinsFiltered.length}</p>
  </div>
  <PlotFigure options={plotOptions} />
</div>

<style>
  .graphic-container {
    padding: 2rem;
    margin: 1rem 0;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    background-color: #f8fafc;
  }
</style>